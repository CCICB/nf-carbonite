app_content:
    code_package: 68e5e4368f27a538dec0b0ea
    entrypoint: main.nf
    executor_version: 24.04.0
class: nextflow
cwlVersion: None
doc: "# nf-carbonite\n\nA comprehensive RNA-Seq analysis pipeline built with [Nextflow](https://www.nextflow.io)\
    \ for processing RNA sequencing data through multiple analysis tools including\
    \ alignment, fusion detection, variant calling, and specialized analyses for hematological\
    \ malignancies.\n\n<p align=\"center\">\n    <img title=\"Carbonite Workflow\"\
    \ src=\"assets/nf-carbonite.png\" width=80%>\n</p>\n\n## Overview\n\n**nf-carbonite**\
    \ performs end-to-end RNA-Seq analysis with the following key features:\n- **Read\
    \ alignment** with STAR\n- **Gene expression quantification** with RSEM  \n- **Fusion\
    \ detection** with STAR-Fusion and Arriba\n- **Variant calling** with GATK HaplotypeCaller\
    \ and FreeBayes\n- **Specialized hematological analyses** with ALLSorts and TALLSorts\n\
    - **Transposable element analysis** with TEtranscripts\n- **Immune profiling**\
    \ with MiXCR\n- **Isoform analysis** with Isofox\n- **Novel splice junction detection**\
    \ with MINTIE\n\n## Quick Start\n\n1. **Install Nextflow** (>=24.04.0)\n2. **Clone\
    \ the repository**:\n   ```bash\n   git clone git@github.com:CCICB/nf-carbonite.git\n\
    \   chmod +x nf-carbonite/bin/*\n   ```\n3. **Prepare your samplesheet** (`samples.csv`)\n\
    4. **Configure parameters** (`params.yaml`) \n5. **Run the pipeline**\n\n## Requirements\n\
    \n### System Requirements\n- **Nextflow** (>=24.04.0)\n- **Container system**:\
    \ Docker or Singularity\n- **Reference files**: See [Configuring Parameters](#configuring-parameters)\
    \ section\n\n### Compatible Environments\nSuccessfully tested on:\n- **Pawsey\
    \ Supercomputing Centre**\n- **NCI Gadi** \n- **Azure Virtual Machines**\n\n##\
    \ Input Preparation\n\n### Sample Sheet Format\nCreate a CSV file (`samples.csv`)\
    \ with your sample information:\n\n```csv\nrnaseq_id,directories\nABC123,/path/to/fastq/files/ABC123\n\
    XYZ987,/path/to/fastq/files/XYZ987\nDEF456,/path/to/fastq/files/DEF456\n```\n\n\
    **Format details:**\n- **Header required**: `rnaseq_id,directories`\n- **rnaseq_id**:\
    \ Unique sample identifier\n- **directories**: Full path to directory containing\
    \ FASTQ files for that sample\n- **Multiple samples**: Each sample runs as a separate\
    \ pipeline execution\n\n## Configuring Parameters\n\nCreate a `params.yaml` file\
    \ with your reference files and analysis options. The file should contain both\
    \ mandatory and optional parameters as described below.\n\n### Mandatory Parameters\n\
    These parameters are **required** for the pipeline to run:\n\n```yaml\n# Mandatory\
    \ reference files (all required)\ngenome_lib_dir: /path/to/ref/files/38/ctat_genome_lib_build_dir\
    \     # Path to STAR genome library directory\nstar_dir: /path/to/ref/files/38/STAR\
    \                               # Path to STAR reference directory  \ngtf_file:\
    \ /path/to/ref/files/38/gencode.v41.annotation.gtf         # Path to gene annotation\
    \ GTF file\nensg2hgnc_file: /path/to/ref/files/38/gencode_v41_ensg_hgnc.csv  \
    \   # Path to ENSG to HGNC gene mapping file\nexcluded_genes: /path/to/ref/files/38/exclude_genes.gencode_v41.txt\
    \ # Path to file containing genes to exclude from analysis\n\n# Pipeline configuration\
    \ (optional - defaults shown)\nreference_name: 'GRCh38_no_alt_analysis_set'  #\
    \ Prefix of your .fa file (default: 'GRCh38_no_alt_analysis_set')\nref_genome_version:\
    \ 'hs38'                     # Reference genome version: 'hs38' or 'hg19' (default:\
    \ 'hs38')\n```\n\n### Optional Parameters\nThese parameters are **optional**.\
    \ If not provided, the corresponding analysis will be **skipped**:\n\n```yaml\n\
    # Optional reference files (omit any you don't want to use)\nrnaindel_dir: /path/to/ref/files/38/data_dir_grch38\
    \                 # RNA-indel data directory (skips RNAINDEL if omitted)\nensembl_data_dir:\
    \ /path/to/ref/files/38/ensembl                     # Ensembl data directory (skips\
    \ ISOFOX if omitted)  \nmixcr_license: /path/to/ref/files/38/mi.license      \
    \               # MiXCR license file (skips MIXCR if omitted)\nte_gtf_file: /path/to/ref/files/38/GRCh38_GENCODE_rmsk_TE.gtf\
    \       # Transposable element GTF file (skips TECOUNT if omitted)\nfreebayes_interval_list:\
    \ /path/to/ref/files/38/pathogenic_snps.bed  # Interval list for targeted analysis\
    \ (skips FREEBAYES if omitted)\nmintie_dir: /path/to/ref/files/mintie-0.3.9-0/ref\
    \                  # MINTIE reference directory (skips MINTIE if omitted)\nannovar_dir:\
    \ /path/to/ref/files/38/annovar                          # ANNOVAR data directory\
    \ (skips ANNOVAR if omitted)\ngatk_interval_list: /path/to/ref/files/38/gatk.interval_list\
    \        # GATK interval list (skips GATK_HAPLOTYPECALLER if omitted)\n```\n\n\
    > [!NOTE]\n> - **hs38 mode only**: FreeBayes, Isofox, and MINTIE are only available\
    \ when using `ref_genome_version: 'hs38'`\n> - **File formats**: GTF files can\
    \ be compressed (`.gtf.gz`), BED files can be compressed (`.bed.gz`)\n> - **Analysis\
    \ skipping**: Any optional parameter you omit will skip the corresponding analysis\
    \ tool\n\n### Complete params.yaml Example\n```yaml\n# Mandatory parameters\n\
    genome_lib_dir: /path/to/ref/files/38/ctat_genome_lib_build_dir\nstar_dir: /path/to/ref/files/38/STAR\n\
    gtf_file: /path/to/ref/files/38/gencode.v41.annotation.gtf\nensg2hgnc_file: /path/to/ref/files/38/gencode_v41_ensg_hgnc.csv\n\
    excluded_genes: /path/to/ref/files/38/exclude_genes.gencode_v41.txt\n\n# Optional\
    \ parameters (include only what you need)\nrnaindel_dir: /path/to/ref/files/38/data_dir_grch38\n\
    ensembl_data_dir: /path/to/ref/files/38/ensembl\nmixcr_license: /path/to/ref/files/38/mi.license\n\
    te_gtf_file: /path/to/ref/files/38/GRCh38_GENCODE_rmsk_TE.gtf\nfreebayes_interval_list:\
    \ /path/to/ref/files/38/pathogenic_snps.bed\nmintie_dir: /path/to/ref/files/mintie-0.3.9-0/ref\n\
    annovar_dir: /path/to/ref/files/38/annovar\ngatk_interval_list: /path/to/ref/files/38/gatk.interval_list\n\
    ```\n\n## Running the Pipeline\n\n### Basic Command\n```bash\nnextflow run /path/to/nf-carbonite\
    \ \\\n  --input /path/to/samples.csv \\\n  --outdir /path/to/outputs \\\n  --reference_name\
    \ 'GRCh38_no_alt_analysis_set' \\\n  --ref_genome_version hs38 \\\n  -params-file\
    \ /path/to/params.yaml \\\n  -profile docker \\\n  -resume\n```\n\n### Command\
    \ Line Arguments\n\n#### Required Arguments\n| Argument | Type | Description |\n\
    |----------|------|-------------|\n| `--input` | String | Path to the sample sheet\
    \ CSV file |\n| `--outdir` | String | Output directory for results (must exist)\
    \ |\n| `--reference_name` | String | Prefix of your reference FASTA file |\n|\
    \ `--ref_genome_version` | String | Genome version: `hs38` or `hg19` |\n| `-params-file`\
    \ | String | Path to your `params.yaml` configuration file |\n| `-profile` | String\
    \ | Execution profile: `docker`, `singularity`, `local`, etc. |\n\n#### Optional\
    \ Arguments  \n| Argument | Type | Description | Default |\n|----------|------|-------------|---------|\n\
    | `-resume` | Boolean | Resume previous run using cached results | `false` |\n\
    | `-w` | String | Working directory for temporary files | Current directory |\n\
    | `-c` | String | Additional Nextflow config file (not for parameters) | None\
    \ |\n\n### Advanced Usage\n```bash\n# With custom working directory and additional\
    \ config\nnextflow run /path/to/nf-carbonite \\\n  --input samples.csv \\\n  --outdir\
    \ results \\\n  --reference_name 'GRCh38_no_alt_analysis_set' \\\n  --ref_genome_version\
    \ hs38 \\\n  -params-file params.yaml \\\n  -profile singularity \\\n  -c custom.config\
    \ \\\n  -w /scratch/work_dir \\\n  -resume\n```\n\n> [!WARNING]\n> **Parameter\
    \ Configuration**: Always provide pipeline parameters via `-params-file` or CLI\
    \ options. Custom config files (`-c`) should only contain execution settings,\
    \ not analysis parameters. See [Nextflow configuration docs](https://nf-co.re/docs/usage/getting_started/configuration#custom-configuration-files)\
    \ for details.\n\n## Analysis Tools\n\nThe pipeline integrates multiple specialized\
    \ tools organized by analysis type:\n\n### Core RNA-Seq Analysis\n- **[STAR](https://github.com/alexdobin/STAR)**\
    \ (v2.7.8a) - Read alignment\n- **[RSEM](https://github.com/deweylab/RSEM)** (v1.3.3)\
    \ - Gene expression quantification\n- **[Picard](https://github.com/broadinstitute/picard/releases/tag/2.25.7)**\
    \ (v2.25.7) - BAM processing and metrics\n\n### Fusion Detection\n- **[STAR-Fusion](https://github.com/STAR-Fusion/STAR-Fusion/wiki)**\
    \ (v1.12.0) - Fusion transcript detection\n- **[Arriba](https://github.com/suhrig/arriba)**\
    \ (v2.4.0) - Additional fusion calling\n\n### Variant Analysis\n- **[GATK HaplotypeCaller](https://gatk.broadinstitute.org/hc/en-us/sections/21904957852571-4-5-0-0)**\
    \ (v4.5.0.0) - SNV/indel calling\n- **[FreeBayes](https://github.com/freebayes/freebayes)**\
    \ (v1.3.6) - Variant calling *(hs38 only)*\n- **[RNAIndel](https://github.com/stjude/RNAIndel)**\
    \ (v3.3.3) - RNA-specific indel detection\n- **[ANNOVAR](https://annovar.openbioinformatics.org/en/latest/)**\
    \ - Variant annotation\n\n### Specialized Analyses\n- **[ALLSorts](https://github.com/Oshlack/ALLSorts)**\
    \ (v0.2.0) - Acute lymphoblastic leukemia classification  \n- **[TALLSorts](https://github.com/Oshlack/TALLSorts)**\
    \ - T-cell acute lymphoblastic leukemia subtyping\n- **[MiXCR](https://github.com/milaboratory/mixcr)**\
    \ (v4.3.2) - Immune repertoire analysis\n- **[Isofox](https://github.com/hartwigmedical/hmftools/tree/master/isofox)**\
    \ (v1.7.1) - Isoform expression *(hs38 only)*\n- **[TEtranscripts](https://github.com/mhammell-laboratory/TEtranscripts.git)**\
    \ (v2.2.1) - Transposable element analysis\n- **[MINTIE](https://github.com/Oshlack/MINTIE)**\
    \ (v0.4.2) - Novel splice variant detection *(hs38 only)*\n\n> [!NOTE]\n> **hs38-only\
    \ tools**: FreeBayes, Isofox, and MINTIE analyses are only available when using\
    \ `ref_genome_version: 'hs38'`\n\n\n## Credits & Acknowledgments\n\nThis pipeline\
    \ was developed by CCI using [nf-core/rnaseq](https://github.com/nf-core/rnaseq)\
    \ as the foundation template.\n\n### Funding\nDevelopment of nf-carbonite has\
    \ been supported by:\n- **MRFF** - Medical Research Future Fund\n- **NHMRC** -\
    \ National Health and Medical Research Council\n- **Minderoo Foundation**\n- **Luminesce\
    \ Alliance** \n- **NSW Health**\n- **CINSW** - Cancer Institute NSW\n- **Australian\
    \ Government Research Training Program**\n- **Cure Brain Cancer Foundation**\n\
    - **[Bioplatforms Australia](https://australianbiocommons.github.io/ables/acknowledgements)**\
    \ (enabled by NCRIS), NCI and Pawsey Supercomputing Research Centre\n"
hints:
-   class: sbg:NextflowExecutionMode
    value: multi-instance
inputs:
-   doc: Select which profile(s) you want to use for task execution.
    id: profile
    inputBinding:
        itemSeparator: ','
        prefix: -profile
    label: Profiles
    type:
    - 'null'
    -   items:
            name: profile
            symbols:
            - arm
            - base
            - cavatica
            - debug
            - docker
            - local
            - nci
            - pawsey
            - singularity
            - tower
            type: enum
        type: array
-   doc: You will need to create a design file with information about the samples
        in your experiment before running the pipeline. Use this parameter to specify
        its location. It has to be a comma-separated file with 3 columns, and a header
        row.
    format: text/csv
    id: input
    inputBinding:
        prefix: --input
    label: Path to comma-separated file containing information about the samples in
        the experiment.
    sbg:category: Input/output options
    sbg:icon: fas fa-file-csv
    sbg:pattern: ^\S+\.csv$
    type:
    - 'null'
    - File
-   id: outdir
    inputBinding:
        prefix: --outdir
    label: The output directory where the results will be saved. You have to use absolute
        paths to storage on Cloud infrastructure.
    sbg:category: Input/output options
    sbg:icon: fas fa-folder-open
    type: string
-   id: reference_name
    inputBinding:
        prefix: --reference_name
    sbg:category: Input/output options
    sbg:toolDefaultValue: GRCh38_no_alt_analysis_set
    type:
    - 'null'
    - string
-   id: ref_genome_version
    inputBinding:
        prefix: --ref_genome_version
    sbg:category: Input/output options
    sbg:toolDefaultValue: hs38
    type:
    - 'null'
    -   name: ref_genome_version
        symbols:
        - hs38
        - hg19
        type: enum
-   id: genome_lib_dir
    inputBinding:
        prefix: --genome_lib_dir
    label: Path to STAR genome library directory
    sbg:category: Reference files
    type:
    - 'null'
    - Directory
-   id: star_dir
    inputBinding:
        prefix: --star_dir
    label: Path to STAR reference directory
    sbg:category: Reference files
    type:
    - 'null'
    - Directory
-   id: gtf_file
    inputBinding:
        prefix: --gtf_file
    label: Path to gene annotation GTF file
    sbg:category: Reference files
    sbg:pattern: ^\\S+\\.gtf(\\.gz)?$
    type:
    - 'null'
    - File
-   id: ensg2hgnc_file
    inputBinding:
        prefix: --ensg2hgnc_file
    label: Path to ENSG to HGNC gene mapping file
    sbg:category: Reference files
    type:
    - 'null'
    - File
-   id: excluded_genes
    inputBinding:
        prefix: --excluded_genes
    label: Path to file containing genes to exclude from analysis
    sbg:category: Reference files
    type:
    - 'null'
    - File
-   id: rnaindel_dir
    inputBinding:
        prefix: --rnaindel_dir
    label: Path to RNA-indel data directory (optional - if not provided, RNAINDEL
        analysis will be skipped)
    sbg:category: Optional reference files
    type:
    - 'null'
    - Directory
-   id: ensembl_data_dir
    inputBinding:
        prefix: --ensembl_data_dir
    label: Path to Ensembl data directory (optional - if not provided, ISOFOX analysis
        will be skipped)
    sbg:category: Optional reference files
    type:
    - 'null'
    - Directory
-   id: mixcr_license
    inputBinding:
        prefix: --mixcr_license
    label: Path to MiXCR license file (optional - if not provided, MIXCR analysis
        will be skipped)
    sbg:category: Optional reference files
    type:
    - 'null'
    - File
-   id: te_gtf_file
    inputBinding:
        prefix: --te_gtf_file
    label: Path to transposable element GTF file (optional - if not provided, TECOUNT
        analysis will be skipped)
    sbg:category: Optional reference files
    sbg:pattern: ^\\S+\\.gtf(\\.gz)?$
    type:
    - 'null'
    - File
-   id: freebayes_interval_list
    inputBinding:
        prefix: --freebayes_interval_list
    label: Optional interval list for targeted analysis (if not provided, FREEBAYES
        analysis will be skipped)
    sbg:category: Optional reference files
    sbg:pattern: ^\\S+\\.bed(\\.gz)?$
    type:
    - 'null'
    - File
-   id: mintie_dir
    inputBinding:
        prefix: --mintie_dir
    label: Path to MINTIE reference directory (optional - if not provided, MINTIE
        analysis will be skipped)
    sbg:category: Optional reference files
    type:
    - 'null'
    - Directory
-   id: annovar_dir
    inputBinding:
        prefix: --annovar_dir
    label: Path to ANNOVAR data directory (optional - if not provided, ANNOVAR analysis
        will be skipped)
    sbg:category: Optional reference files
    type:
    - 'null'
    - Directory
-   id: gatk_interval_list
    inputBinding:
        prefix: --gatk_interval_list
    label: Optional interval list for targeted analysis in GATK Haplotypecaller
    sbg:category: Optional reference files
    type:
    - 'null'
    - File
-   doc: List of files not added as explicit workflow inputs but required for workflow
        execution.
    id: auxiliary_files
    label: Auxiliary files
    type:
    - 'null'
    -   items: File
        type: array
-   doc: Provide parameters through a JSON format input file.
    id: params_file
    inputBinding:
        prefix: -params-file
    label: Params files
    sbg:fileTypes: JSON
    type:
    - 'null'
    - File
outputs:
-   doc: This is a template output. You can modify the glob pattern to make outputs
        more specific.
    id: nf_publishdir
    label: Publish Directory
    outputBinding:
        glob: '*'
    type:
    - 'null'
    -   items: File
        type: array
requirements:
-   class: InlineJavascriptRequirement
sbg:links:
-   id: https://github.com/CCICB/nf-carbonite
    label: Home Page
sbg:revisionNotes: Uploaded using sbpack v2024.10.30
sbg:toolAuthor: Computational Biology, Children's Cancer Institute
